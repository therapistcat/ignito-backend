import{r as i,a as te,b as ae}from"./vendor-b69f2a9f.js";import{u as $,a as M,L as N,N as re,b as Y,R as U,c as I,B as ne}from"./router-d69acf51.js";import{a as oe}from"./http-b5ee139b.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const x of r)if(x.type==="childList")for(const m of x.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&o(m)}).observe(document,{childList:!0,subtree:!0});function d(r){const x={};return r.integrity&&(x.integrity=r.integrity),r.referrerPolicy&&(x.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?x.credentials="include":r.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function o(r){if(r.ep)return;r.ep=!0;const x=d(r);fetch(r.href,x)}})();var Q={exports:{}},_={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ie=i,le=Symbol.for("react.element"),ce=Symbol.for("react.fragment"),de=Object.prototype.hasOwnProperty,he=ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ue={key:!0,ref:!0,__self:!0,__source:!0};function J(s,a,d){var o,r={},x=null,m=null;d!==void 0&&(x=""+d),a.key!==void 0&&(x=""+a.key),a.ref!==void 0&&(m=a.ref);for(o in a)de.call(a,o)&&!ue.hasOwnProperty(o)&&(r[o]=a[o]);if(s&&s.defaultProps)for(o in a=s.defaultProps,a)r[o]===void 0&&(r[o]=a[o]);return{$$typeof:le,type:s,key:x,ref:m,props:r,_owner:he.current}}_.Fragment=ce;_.jsx=J;_.jsxs=J;Q.exports=_;var e=Q.exports,H={},q=te;H.createRoot=q.createRoot,H.hydrateRoot=q.hydrateRoot;const Z=i.createContext(),V=()=>{const s=i.useContext(Z);if(!s)throw new Error("useAuth must be used within an AuthProvider");return s},me=({children:s})=>{const[a,d]=i.useState(null),[o,r]=i.useState(!0);i.useEffect(()=>{const c=localStorage.getItem("bookstore_user");if(c)try{d(JSON.parse(c))}catch(u){console.error("Error parsing saved user:",u),localStorage.removeItem("bookstore_user")}r(!1)},[]);const w={user:a,isLoading:o,login:async(c,u)=>{r(!0);try{if(await new Promise(g=>setTimeout(g,1e3)),c&&u){const g={id:Date.now(),email:c,name:c.split("@")[0],role:"manager",loginTime:new Date().toISOString()};return d(g),localStorage.setItem("bookstore_user",JSON.stringify(g)),r(!1),{success:!0}}else return r(!1),{success:!1,error:"Invalid credentials"}}catch{return r(!1),{success:!1,error:"Login failed"}}},register:async c=>{r(!0);try{if(await new Promise(u=>setTimeout(u,1e3)),c.email&&c.password&&c.name){const u={id:Date.now(),email:c.email,name:c.name,role:"manager",loginTime:new Date().toISOString()};return d(u),localStorage.setItem("bookstore_user",JSON.stringify(u)),r(!1),{success:!0}}else return r(!1),{success:!1,error:"All fields are required"}}catch{return r(!1),{success:!1,error:"Registration failed"}}},logout:()=>{d(null),localStorage.removeItem("bookstore_user")},isAuthenticated:()=>!!a};return e.jsx(Z.Provider,{value:w,children:s})},pe=()=>{const s=$(),a=M(),{user:d,logout:o}=V(),[r,x]=i.useState(!1),[m,C]=i.useState(!1),p=g=>g==="/"?s.pathname==="/":s.pathname.startsWith(g),w=()=>{x(!r)},c=()=>{x(!1)},u=()=>{o(),a("/login"),C(!1),x(!1)};return e.jsx("nav",{className:"navbar",children:e.jsxs("div",{className:"nav-container",children:[e.jsxs(N,{to:"/",className:"nav-brand",onClick:c,children:[e.jsx("span",{className:"brand-icon",children:"📚"}),e.jsxs("span",{className:"brand-text",children:[e.jsx("span",{className:"brand-main",children:"Old Town Books"}),e.jsx("span",{className:"brand-sub",children:"Management System"})]})]}),e.jsxs("button",{className:`hamburger ${r?"active":""}`,onClick:w,"aria-label":"Toggle navigation menu",children:[e.jsx("span",{className:"hamburger-line"}),e.jsx("span",{className:"hamburger-line"}),e.jsx("span",{className:"hamburger-line"})]}),e.jsxs("div",{className:`nav-links ${r?"active":""}`,children:[e.jsxs(N,{to:"/",className:`nav-link ${p("/")?"active":""}`,onClick:c,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"})}),e.jsx("span",{children:"Dashboard"})]}),e.jsxs(N,{to:"/books",className:`nav-link ${p("/books")?"active":""}`,onClick:c,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1zm0 13.5c-1.1-.35-2.3-.5-3.5-.5-1.7 0-4.15.65-5.5 1.5V8c1.35-.85 3.8-1.5 5.5-1.5 1.2 0 2.4.15 3.5.5v11.5z"})}),e.jsx("span",{children:"Books"})]}),e.jsxs(N,{to:"/authors",className:`nav-link ${p("/authors")?"active":""}`,onClick:c,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),e.jsx("span",{children:"Authors"})]}),e.jsxs(N,{to:"/orders",className:`nav-link ${p("/orders")?"active":""}`,onClick:c,children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7ZM9 3V4H15V3H9ZM7 6V19H17V6H7Z"})}),e.jsx("span",{children:"Orders"})]})]}),e.jsx("div",{className:"nav-user",children:e.jsxs("div",{className:"user-menu-wrapper",children:[e.jsxs("button",{className:"user-avatar",onClick:()=>C(!m),"aria-label":"User menu",children:[e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),e.jsx("span",{className:"user-name",children:(d==null?void 0:d.name)||"User"}),e.jsx("svg",{className:"dropdown-arrow",width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M7 10l5 5 5-5z"})})]}),m&&e.jsxs("div",{className:"user-dropdown",children:[e.jsxs("div",{className:"user-info",children:[e.jsx("p",{className:"user-email",children:d==null?void 0:d.email}),e.jsx("p",{className:"user-role",children:"Manager"})]}),e.jsx("hr",{}),e.jsxs("button",{className:"dropdown-item",onClick:u,children:[e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z"})}),"Sign Out"]})]})]})}),r&&e.jsx("div",{className:"nav-overlay",onClick:c}),m&&e.jsx("div",{className:"user-menu-overlay",onClick:()=>C(!1)})]})})},xe=({children:s})=>{const{isAuthenticated:a,isLoading:d}=V(),o=$();return d?e.jsx("div",{className:"auth-loading",children:e.jsxs("div",{className:"loading-spinner",children:[e.jsx("div",{className:"spinner"}),e.jsx("p",{children:"Checking authentication..."})]})}):a()?s:e.jsx(re,{to:"/login",state:{from:o},replace:!0})},ge={production:{baseURL:{}.VITE_API_BASE_URL||"https://ignito-backend.onrender.com/api",timeout:parseInt({}.VITE_API_TIMEOUT)||15e3},development:{baseURL:{}.VITE_API_BASE_URL||"http://localhost:3000/api",timeout:parseInt({}.VITE_API_TIMEOUT)||1e4}},T="production",K=ge[T],X=K.baseURL,ee=K.timeout,je=T;console.log("🔧 API Configuration:");console.log("  Environment:",T);console.log("  Base URL:",X);console.log("  Timeout:",ee+"ms");const B=oe.create({baseURL:X,headers:{"Content-Type":"application/json"},timeout:ee});console.log(`🚀 API instance created for ${je} environment`);B.interceptors.request.use(s=>{var a;return console.log(`🔄 Making API call: ${(a=s.method)==null?void 0:a.toUpperCase()} ${s.url}`),s.params&&console.log("📋 With parameters:",s.params),s},s=>(console.error("❌ API Request Error:",s),Promise.reject(s)));B.interceptors.response.use(s=>(console.log(`✅ API Response: ${s.status} ${s.config.url}`),s),s=>{var a;return console.error("❌ API Response Error:",((a=s.response)==null?void 0:a.data)||s.message),Promise.reject(s)});const z={getAll:async(s={})=>{console.log("📚 Getting books with params:",s);const a=await B.get("/books",{params:s});return console.log("📚 Got books response:",a.data),a.data},getById:async s=>(await B.get(`/books/${s}`)).data,create:async s=>(await B.post("/books",s)).data,update:async(s,a)=>(await B.put(`/books/${s}`,a)).data,patch:async(s,a)=>(await B.patch(`/books/${s}`,a)).data,updateStock:async(s,a)=>(await B.patch(`/books/${s}/stock`,{stock:a})).data,delete:async s=>(await B.delete(`/books/${s}`)).data},D={getAll:async(s={})=>(await B.get("/authors",{params:s})).data,getById:async s=>(await B.get(`/authors/${s}`)).data,create:async s=>(await B.post("/authors",s)).data,update:async(s,a)=>(await B.put(`/authors/${s}`,a)).data,delete:async s=>(await B.delete(`/authors/${s}`)).data},L={getAll:async(s={})=>(await B.get("/orders",{params:s})).data,getById:async s=>(await B.get(`/orders/${s}`)).data,create:async s=>(await B.post("/orders",s)).data,update:async(s,a)=>(await B.put(`/orders/${s}`,a)).data,updateStatus:async(s,a)=>(await B.patch(`/orders/${s}/status`,{status:a})).data,delete:async s=>(await B.delete(`/orders/${s}`)).data},E=s=>{var a;return s.response?{success:!1,message:((a=s.response.data)==null?void 0:a.message)||"An error occurred",status:s.response.status}:s.request?{success:!1,message:"Unable to connect to server",status:0}:{success:!1,message:s.message,status:0}},ve=()=>{const[s,a]=i.useState({totalBooks:0,totalAuthors:0,totalOrders:0,lowStockBooks:0,pendingOrders:0}),[d,o]=i.useState([]),[r,x]=i.useState([]),[m,C]=i.useState(!0),[p,w]=i.useState(null);i.useEffect(()=>{c()},[]);const c=async()=>{var u,g,S;try{C(!0),w(null),console.log("Fetching dashboard data...");const[y,A,f]=await Promise.all([z.getAll({limit:5}),D.getAll({limit:1}),L.getAll({limit:5})]);console.log("Got books:",y),console.log("Got authors:",A),console.log("Got orders:",f);const v=y.data||[],t=((u=A.pagination)==null?void 0:u.totalAuthors)||0,l=f.data||[];let b=0;for(let j=0;j<v.length;j++)v[j].stock<10&&b++;console.log("Found",b,"books with low stock");let n=0;l.forEach(j=>{j.status==="pending"&&n++}),console.log("Found",n,"pending orders"),a({totalBooks:((g=y.pagination)==null?void 0:g.totalBooks)||v.length,totalAuthors:t,totalOrders:((S=f.pagination)==null?void 0:S.totalOrders)||l.length,lowStockBooks:b,pendingOrders:n}),o(v.slice(0,5)),x(l.slice(0,5))}catch(y){console.error("Error fetching dashboard data:",y);const A=E(y);w(A.message)}finally{C(!1)}};return m?e.jsx("div",{className:"dashboard",children:e.jsxs("div",{className:"loading",children:[e.jsx("h2",{children:"📊 Loading Dashboard..."}),e.jsx("p",{children:"Fetching your bookstore data..."})]})}):p?e.jsx("div",{className:"dashboard",children:e.jsxs("div",{className:"error",children:[e.jsx("h2",{children:"❌ Error Loading Dashboard"}),e.jsx("p",{children:p}),e.jsx("button",{onClick:c,className:"btn btn-primary",children:"🔄 Retry"})]})}):e.jsxs("div",{className:"dashboard",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Dashboard"}),e.jsx("p",{children:"Welcome to your Bookstore Management System"})]}),e.jsx("div",{className:"header-icon",children:e.jsx("svg",{width:"60",height:"60",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"})})})]}),e.jsxs("div",{className:"stats-grid",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z"})})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s.totalBooks}),e.jsx("p",{children:"Total Books"})]}),e.jsx(N,{to:"/books",className:"stat-link",children:"View All →"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s.totalAuthors}),e.jsx("p",{children:"Total Authors"})]}),e.jsx(N,{to:"/authors",className:"stat-link",children:"View All →"})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M7 4V2C7 1.45 7.45 1 8 1H16C16.55 1 17 1.45 17 2V4H20C20.55 4 21 4.45 21 5S20.55 6 20 6H19V19C19 20.1 18.1 21 17 21H7C5.9 21 5 20.1 5 19V6H4C3.45 6 3 5.55 3 5S3.45 4 4 4H7Z"})})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s.totalOrders}),e.jsx("p",{children:"Total Orders"})]}),e.jsx(N,{to:"/orders",className:"stat-link",children:"View All →"})]}),e.jsxs("div",{className:"stat-card warning",children:[e.jsx("div",{className:"stat-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s.lowStockBooks}),e.jsx("p",{children:"Low Stock Books"})]}),e.jsx(N,{to:"/books?filter=low-stock",className:"stat-link",children:"Check Stock →"})]}),e.jsxs("div",{className:"stat-card info",children:[e.jsx("div",{className:"stat-icon",children:e.jsx("svg",{width:"40",height:"40",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2M7.07,18.28C7.5,17.38 10.12,16.5 12,16.5C13.88,16.5 16.5,17.38 16.93,18.28C15.57,19.36 13.86,20 12,20C10.14,20 8.43,19.36 7.07,18.28M18.36,16.83C16.93,15.09 13.46,14.5 12,14.5C10.54,14.5 7.07,15.09 5.64,16.83C4.62,15.5 4,13.82 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,13.82 19.38,15.5 18.36,16.83M12,6C10.06,6 8.5,7.56 8.5,9.5C8.5,11.44 10.06,13 12,13C13.94,13 15.5,11.44 15.5,9.5C15.5,7.56 13.94,6 12,6M12,11A1.5,1.5 0 0,1 10.5,9.5A1.5,1.5 0 0,1 12,8A1.5,1.5 0 0,1 13.5,9.5A1.5,1.5 0 0,1 12,11Z"})})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("h3",{children:s.pendingOrders}),e.jsx("p",{children:"Pending Orders"})]}),e.jsx(N,{to:"/orders?status=pending",className:"stat-link",children:"Process →"})]})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("h2",{children:"🚀 Quick Actions"}),e.jsxs("div",{className:"action-buttons",children:[e.jsx(N,{to:"/books/new",className:"btn btn-primary",children:"➕ Add New Book"}),e.jsx(N,{to:"/authors/new",className:"btn btn-secondary",children:"👤 Add New Author"}),e.jsx(N,{to:"/orders",className:"btn btn-info",children:"📋 View Orders"})]})]}),e.jsxs("div",{className:"recent-activity",children:[e.jsxs("div",{className:"recent-section",children:[e.jsx("h3",{children:"📖 Recent Books"}),d.length>0?e.jsx("div",{className:"recent-list",children:d.map(u=>{var g;return e.jsxs("div",{className:"recent-item",children:[e.jsxs("div",{className:"item-info",children:[e.jsx("h4",{children:u.title}),e.jsxs("p",{children:["by ",((g=u.author)==null?void 0:g.name)||"Unknown Author"]}),e.jsxs("span",{className:"item-meta",children:["₹",u.price," • Stock: ",u.stock]})]}),e.jsx("div",{className:"item-actions",children:e.jsx(N,{to:`/books/edit/${u._id}`,className:"btn btn-sm",children:"Edit"})})]},u._id)})}):e.jsxs("p",{className:"no-data",children:["No books found. ",e.jsx(N,{to:"/books/new",children:"Add your first book!"})]})]}),e.jsxs("div",{className:"recent-section",children:[e.jsx("h3",{children:"🛒 Recent Orders"}),r.length>0?e.jsx("div",{className:"recent-list",children:r.map(u=>e.jsxs("div",{className:"recent-item",children:[e.jsxs("div",{className:"item-info",children:[e.jsxs("h4",{children:["Order #",u._id.slice(-6)]}),e.jsx("p",{children:u.customerName}),e.jsxs("span",{className:"item-meta",children:["₹",u.total," • ",u.status]})]}),e.jsx("div",{className:"item-actions",children:e.jsx("span",{className:`status-badge status-${u.status}`,children:u.status})})]},u._id))}):e.jsx("p",{className:"no-data",children:"No orders found."})]})]})]})},fe=()=>{const[s,a]=i.useState([]),[d,o]=i.useState(!0),[r,x]=i.useState(null),[m,C]=i.useState({}),[p,w]=i.useState(""),[c,u]=i.useState(""),[g,S]=i.useState(1),[y]=i.useState(10),A=["Fiction","Non-Fiction","Mystery","Romance","Sci-Fi","Fantasy","Biography","History","Self-Help","Technical"];i.useEffect(()=>{console.log("useEffect triggered - fetching books..."),f()},[g,c]),i.useEffect(()=>{if(p===""){f();return}console.log("Setting up search timer for:",p);const h=setTimeout(()=>{console.log("Search timer fired - searching for:",p),f()},500);return()=>{console.log("Clearing search timer"),clearTimeout(h)}},[p]);const f=async()=>{try{o(!0),x(null);const h={page:g,limit:y};p.trim()&&(h.q=p.trim(),console.log("Searching for:",p.trim())),c&&(h.genre=c,console.log("Filtering by genre:",c)),console.log("API params:",h);const P=await z.getAll(h);console.log("API response:",P),a(P.data||[]),C(P.pagination||{})}catch(h){console.error("Error fetching books:",h);const P=E(h);x(P.message)}finally{o(!1)}},v=h=>{const P=h.target.value;console.log("User typed:",P),w(P),S(1)},t=h=>{h.key==="Enter"&&(console.log("User pressed Enter - searching immediately"),f())},l=h=>{const P=h.target.value;console.log("User selected genre:",P),u(P),S(1)},b=()=>{console.log("Current search query:",p),console.log("Current genre filter:",c),console.log("Current page:",g)},n=async(h,P)=>{if(!window.confirm(`Are you sure you want to delete "${P}"?`)){console.log("User cancelled deletion");return}try{console.log("Deleting book with ID:",h),await z.delete(h),f(),alert("Book deleted successfully!")}catch(F){console.error("Error deleting book:",F);const O=E(F);alert(`Failed to delete book: ${O.message}`)}},j=async(h,P)=>{const R=prompt(`Update stock for this book (current: ${P}):`);if(R===null)return;const F=parseInt(R);if(isNaN(F)||F<0){alert("Please enter a valid stock number (0 or greater)");return}try{console.log("Updating stock to:",F),await z.updateStock(h,F),f(),alert("Stock updated successfully!")}catch(O){console.error("Error updating stock:",O);const se=E(O);alert(`Failed to update stock: ${se.message}`)}},k=h=>{S(h)};return d?e.jsx("div",{className:"books-page",children:e.jsxs("div",{className:"loading",children:[e.jsx("h2",{children:"📚 Loading Books..."}),e.jsx("p",{children:"Fetching your book collection..."})]})}):e.jsxs("div",{className:"books-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Books Management"}),e.jsx("p",{children:"Manage your book inventory"})]}),e.jsxs(N,{to:"/books/new",className:"btn btn-primary",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"})}),"Add New Book"]})]}),e.jsxs("div",{className:"controls",children:[e.jsx("div",{className:"search-box",children:e.jsxs("div",{className:"search-input-wrapper",children:[e.jsx("svg",{className:"search-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"})}),e.jsx("input",{type:"text",placeholder:"Search books by title or description...",value:p,onChange:v,onKeyPress:t,className:"search-input"})]})}),e.jsx("div",{className:"filter-box",children:e.jsxs("select",{value:c,onChange:l,className:"filter-select",children:[e.jsx("option",{value:"",children:"All Genres"}),A.map(h=>e.jsx("option",{value:h,children:h},h))]})}),e.jsx("button",{onClick:b,className:"btn btn-secondary",style:{fontSize:"0.8rem"},children:"Debug Search"})]}),!1,r&&e.jsxs("div",{className:"error",children:[e.jsxs("p",{children:["❌ ",r]}),e.jsx("button",{onClick:f,className:"btn btn-secondary",children:"🔄 Retry"})]}),s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"books-grid",children:s.map(h=>{var P;return e.jsxs("div",{className:"book-card",children:[e.jsxs("div",{className:"book-header",children:[e.jsx("h3",{className:"book-title",children:h.title}),e.jsx("span",{className:"book-genre",children:h.genre})]}),e.jsxs("div",{className:"book-info",children:[e.jsxs("p",{className:"book-author",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),((P=h.author)==null?void 0:P.name)||"Unknown Author"]}),e.jsxs("p",{className:"book-isbn",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z"})}),"ISBN: ",h.isbn]}),e.jsxs("p",{className:"book-price",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M7 15h7v2H7zm0-4h10v2H7zm0-4h10v2H7zm-3 0h2v2H4zm0 4h2v2H4zm0 4h2v2H4z"})}),"₹",h.price]}),e.jsxs("p",{className:`book-stock ${h.stock<10?"low-stock":""}`,children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20 6h-2c0-2.21-1.79-4-4-4S10 3.79 10 6H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zM14 6c0-1.1-.9-2-2-2s-2 .9-2 2h4z"})}),"Stock: ",h.stock,h.stock<10&&e.jsxs("span",{className:"warning",children:[e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"})}),"Low Stock"]})]}),h.description&&e.jsx("p",{className:"book-description",children:h.description})]}),e.jsxs("div",{className:"book-actions",children:[e.jsxs(N,{to:`/books/edit/${h._id}`,className:"btn btn-sm btn-secondary",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"})}),"Edit"]}),e.jsxs("button",{onClick:()=>j(h._id,h.stock),className:"btn btn-sm btn-info",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20 6h-2c0-2.21-1.79-4-4-4S10 3.79 10 6H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2z"})}),"Stock"]}),e.jsxs("button",{onClick:()=>n(h._id,h.title),className:"btn btn-sm btn-danger",children:[e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})}),"Delete"]})]})]},h._id)})}),m.totalPages>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>k(g-1),disabled:!m.hasPrevPage,className:"btn btn-secondary",children:"← Previous"}),e.jsxs("span",{className:"page-info",children:["Page ",m.currentPage," of ",m.totalPages,"(",m.totalBooks," total books)"]}),e.jsx("button",{onClick:()=>k(g+1),disabled:!m.hasNextPage,className:"btn btn-secondary",children:"Next →"})]})]}):e.jsxs("div",{className:"no-data",children:[e.jsx("h3",{children:"📚 No Books Found"}),p||c?e.jsx("p",{children:"No books match your current search or filter criteria."}):e.jsx("p",{children:"You haven't added any books yet."}),e.jsx(N,{to:"/books/new",className:"btn btn-primary",children:"➕ Add Your First Book"})]})]})},be=()=>{const[s,a]=i.useState([]),[d,o]=i.useState(!0),[r,x]=i.useState(null),[m,C]=i.useState({}),[p,w]=i.useState(""),[c,u]=i.useState(1),[g]=i.useState(12);i.useEffect(()=>{S()},[c,p]);const S=async()=>{try{o(!0),x(null);const t={page:c,limit:g};p&&(t.nationality=p);const l=await D.getAll(t);a(l.data||[]),C(l.pagination||{})}catch(t){console.error("Error fetching authors:",t);const l=E(t);x(l.message)}finally{o(!1)}},y=t=>{w(t.target.value),u(1)},A=async(t,l)=>{if(window.confirm(`Are you sure you want to delete "${l}"? This will fail if the author has books.`))try{await D.delete(t),S(),alert("Author deleted successfully!")}catch(b){console.error("Error deleting author:",b);const n=E(b);alert(`Failed to delete author: ${n.message}`)}},f=t=>{u(t)},v=[...new Set(s.map(t=>t.nationality).filter(Boolean))];return d?e.jsx("div",{className:"authors-page",children:e.jsxs("div",{className:"loading",children:[e.jsx("h2",{children:"👨‍💼 Loading Authors..."}),e.jsx("p",{children:"Fetching author information..."})]})}):e.jsxs("div",{className:"authors-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"👨‍💼 Authors Management"}),e.jsx(N,{to:"/authors/new",className:"btn btn-primary",children:"➕ Add New Author"})]}),e.jsx("div",{className:"controls",children:e.jsx("div",{className:"filter-box",children:e.jsxs("select",{value:p,onChange:y,className:"filter-select",children:[e.jsx("option",{value:"",children:"All Nationalities"}),v.map(t=>e.jsx("option",{value:t,children:t},t))]})})}),r&&e.jsxs("div",{className:"error",children:[e.jsxs("p",{children:["❌ ",r]}),e.jsx("button",{onClick:S,className:"btn btn-secondary",children:"🔄 Retry"})]}),s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"authors-grid",children:s.map(t=>e.jsxs("div",{className:"author-card",children:[e.jsxs("div",{className:"author-header",children:[e.jsx("h3",{className:"author-name",children:t.name}),t.nationality&&e.jsxs("span",{className:"author-nationality",children:["🌍 ",t.nationality]})]}),e.jsxs("div",{className:"author-info",children:[t.email&&e.jsxs("p",{className:"author-email",children:["📧 ",t.email]}),t.birthDate&&e.jsxs("p",{className:"author-birth",children:["🎂 Born: ",new Date(t.birthDate).toLocaleDateString(),t.age&&e.jsxs("span",{children:[" (Age: ",t.age,")"]})]}),t.website&&e.jsxs("p",{className:"author-website",children:["🌐 ",e.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",children:"Website"})]}),t.biography&&e.jsx("p",{className:"author-bio",children:t.biography}),t.awards&&t.awards.length>0&&e.jsxs("div",{className:"author-awards",children:[e.jsx("h4",{children:"🏆 Awards:"}),e.jsx("ul",{children:t.awards.map((l,b)=>e.jsxs("li",{children:[l.name," (",l.year,")"]},b))})]})]}),e.jsxs("div",{className:"author-actions",children:[e.jsx(N,{to:`/authors/edit/${t._id}`,className:"btn btn-sm btn-secondary",children:"✏️ Edit"}),e.jsx(N,{to:`/books?author=${t._id}`,className:"btn btn-sm btn-info",children:"📚 View Books"}),e.jsx("button",{onClick:()=>A(t._id,t.name),className:"btn btn-sm btn-danger",children:"🗑️ Delete"})]})]},t._id))}),m.totalPages>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>f(c-1),disabled:!m.hasPrevPage,className:"btn btn-secondary",children:"← Previous"}),e.jsxs("span",{className:"page-info",children:["Page ",m.currentPage," of ",m.totalPages,"(",m.totalAuthors," total authors)"]}),e.jsx("button",{onClick:()=>f(c+1),disabled:!m.hasNextPage,className:"btn btn-secondary",children:"Next →"})]})]}):e.jsxs("div",{className:"no-data",children:[e.jsx("h3",{children:"👨‍💼 No Authors Found"}),p?e.jsx("p",{children:"No authors match your current filter criteria."}):e.jsx("p",{children:"You haven't added any authors yet."}),e.jsx(N,{to:"/authors/new",className:"btn btn-primary",children:"➕ Add Your First Author"})]})]})},Ne=()=>{const[s,a]=i.useState([]),[d,o]=i.useState(!0),[r,x]=i.useState(null),[m,C]=i.useState({}),[p,w]=i.useState(""),[c,u]=i.useState(1),[g]=i.useState(10),S=["pending","confirmed","processing","shipped","delivered","cancelled"];i.useEffect(()=>{y()},[c,p]);const y=async()=>{try{o(!0),x(null);const n={page:c,limit:g};p&&(n.status=p);const j=await L.getAll(n);a(j.data||[]),C(j.pagination||{})}catch(n){console.error("Error fetching orders:",n);const j=E(n);x(j.message)}finally{o(!1)}},A=n=>{w(n.target.value),u(1)},f=async(n,j)=>{try{await L.updateStatus(n,j),y(),alert("Order status updated successfully!")}catch(k){console.error("Error updating order status:",k);const h=E(k);alert(`Failed to update order status: ${h.message}`)}},v=async(n,j)=>{if(window.confirm(`Are you sure you want to delete the order for "${j}"?`))try{await L.delete(n),y(),alert("Order deleted successfully!")}catch(k){console.error("Error deleting order:",k);const h=E(k);alert(`Failed to delete order: ${h.message}`)}},t=n=>{u(n)},l=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),b=n=>({pending:"status-pending",confirmed:"status-confirmed",processing:"status-processing",shipped:"status-shipped",delivered:"status-delivered",cancelled:"status-cancelled"})[n]||"status-default";return d?e.jsx("div",{className:"orders-page",children:e.jsxs("div",{className:"loading",children:[e.jsx("h2",{children:"🛒 Loading Orders..."}),e.jsx("p",{children:"Fetching order information..."})]})}):e.jsxs("div",{className:"orders-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:"🛒 Orders Management"}),e.jsx("div",{className:"header-stats",children:e.jsxs("span",{children:["Total Orders: ",m.totalOrders||s.length]})})]}),e.jsx("div",{className:"controls",children:e.jsx("div",{className:"filter-box",children:e.jsxs("select",{value:p,onChange:A,className:"filter-select",children:[e.jsx("option",{value:"",children:"All Statuses"}),S.map(n=>e.jsx("option",{value:n,children:n.charAt(0).toUpperCase()+n.slice(1)},n))]})})}),r&&e.jsxs("div",{className:"error",children:[e.jsxs("p",{children:["❌ ",r]}),e.jsx("button",{onClick:y,className:"btn btn-secondary",children:"🔄 Retry"})]}),s.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"orders-list",children:s.map(n=>e.jsxs("div",{className:"order-card",children:[e.jsxs("div",{className:"order-header",children:[e.jsxs("div",{className:"order-id",children:[e.jsxs("h3",{children:["Order #",n._id.slice(-6)]}),e.jsx("span",{className:`status-badge ${b(n.status)}`,children:n.status})]}),e.jsx("div",{className:"order-date",children:l(n.createdAt)})]}),e.jsxs("div",{className:"order-content",children:[e.jsxs("div",{className:"customer-info",children:[e.jsx("h4",{children:"👤 Customer Information"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",n.customerName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",n.customerEmail]}),n.customerPhone&&e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",n.customerPhone]})]}),e.jsxs("div",{className:"shipping-info",children:[e.jsx("h4",{children:"📍 Shipping Address"}),e.jsxs("p",{children:[n.shippingAddress.street,e.jsx("br",{}),n.shippingAddress.city,", ",n.shippingAddress.state," ",n.shippingAddress.zipCode,e.jsx("br",{}),n.shippingAddress.country]})]}),e.jsxs("div",{className:"order-items",children:[e.jsxs("h4",{children:["📦 Items (",n.totalItems||n.items.length,")"]}),e.jsx("div",{className:"items-list",children:n.items.map((j,k)=>{var h;return e.jsxs("div",{className:"order-item",children:[e.jsx("span",{className:"item-title",children:((h=j.book)==null?void 0:h.title)||"Unknown Book"}),e.jsxs("span",{className:"item-details",children:["Qty: ",j.quantity," × ₹",j.price," = ₹",(j.quantity*j.price).toFixed(2)]})]},k)})})]}),e.jsxs("div",{className:"order-totals",children:[e.jsxs("div",{className:"total-line",children:[e.jsx("span",{children:"Subtotal:"}),e.jsxs("span",{children:["₹",n.subtotal.toFixed(2)]})]}),e.jsxs("div",{className:"total-line",children:[e.jsx("span",{children:"Tax:"}),e.jsxs("span",{children:["₹",n.tax.toFixed(2)]})]}),e.jsxs("div",{className:"total-line",children:[e.jsx("span",{children:"Shipping:"}),e.jsxs("span",{children:["₹",n.shipping.toFixed(2)]})]}),e.jsxs("div",{className:"total-line total",children:[e.jsx("span",{children:e.jsx("strong",{children:"Total:"})}),e.jsx("span",{children:e.jsxs("strong",{children:["₹",n.total.toFixed(2)]})})]})]}),n.notes&&e.jsxs("div",{className:"order-notes",children:[e.jsx("h4",{children:"📝 Notes"}),e.jsx("p",{children:n.notes})]})]}),e.jsxs("div",{className:"order-actions",children:[e.jsxs("div",{className:"status-update",children:[e.jsx("label",{children:"Update Status:"}),e.jsx("select",{value:n.status,onChange:j=>f(n._id,j.target.value),className:"status-select",children:S.map(j=>e.jsx("option",{value:j,children:j.charAt(0).toUpperCase()+j.slice(1)},j))})]}),e.jsx("button",{onClick:()=>v(n._id,n.customerName),className:"btn btn-sm btn-danger",disabled:!["pending","cancelled"].includes(n.status),children:"🗑️ Delete"})]})]},n._id))}),m.totalPages>1&&e.jsxs("div",{className:"pagination",children:[e.jsx("button",{onClick:()=>t(c-1),disabled:!m.hasPrevPage,className:"btn btn-secondary",children:"← Previous"}),e.jsxs("span",{className:"page-info",children:["Page ",m.currentPage," of ",m.totalPages,"(",m.totalOrders," total orders)"]}),e.jsx("button",{onClick:()=>t(c+1),disabled:!m.hasNextPage,className:"btn btn-secondary",children:"Next →"})]})]}):e.jsxs("div",{className:"no-data",children:[e.jsx("h3",{children:"🛒 No Orders Found"}),p?e.jsx("p",{children:"No orders match your current filter criteria."}):e.jsx("p",{children:"No orders have been placed yet."})]})]})},G=()=>{const s=M(),{id:a}=Y(),d=!!a,[o,r]=i.useState({title:"",author:"",isbn:"",genre:"",price:"",stock:"",description:"",publishedDate:"",pages:""}),[x,m]=i.useState([]),[C,p]=i.useState(!1),[w,c]=i.useState(null),[u,g]=i.useState(!1),S=["Fiction","Non-Fiction","Mystery","Romance","Sci-Fi","Fantasy","Biography","History","Self-Help","Technical"];i.useEffect(()=>{y(),d&&A()},[a]);const y=async()=>{try{const t=await D.getAll({limit:100});m(t.data||[])}catch(t){console.error("Error fetching authors:",t)}},A=async()=>{var t,l,b,n;try{p(!0);const k=(await z.getById(a)).data,h=k.publishedDate?new Date(k.publishedDate).toISOString().split("T")[0]:"";r({title:k.title||"",author:((t=k.author)==null?void 0:t._id)||"",isbn:k.isbn||"",genre:k.genre||"",price:((l=k.price)==null?void 0:l.toString())||"",stock:((b=k.stock)==null?void 0:b.toString())||"",description:k.description||"",publishedDate:h,pages:((n=k.pages)==null?void 0:n.toString())||""})}catch(j){console.error("Error fetching book:",j);const k=E(j);c(k.message)}finally{p(!1)}},f=t=>{const{name:l,value:b}=t.target;r(n=>({...n,[l]:b}))},v=async t=>{t.preventDefault(),g(!0),c(null);try{const l={...o,price:parseFloat(o.price),stock:parseInt(o.stock),pages:o.pages?parseInt(o.pages):void 0};Object.keys(l).forEach(b=>{(l[b]===""||l[b]===void 0)&&delete l[b]}),d?(await z.update(a,l),alert("Book updated successfully!")):(await z.create(l),alert("Book created successfully!")),s("/books")}catch(l){console.error("Error saving book:",l);const b=E(l);c(b.message)}finally{g(!1)}};return C?e.jsx("div",{className:"book-form-page",children:e.jsx("div",{className:"loading",children:e.jsx("h2",{children:"📚 Loading Book..."})})}):e.jsxs("div",{className:"book-form-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:d?"✏️ Edit Book":"➕ Add New Book"}),e.jsx("button",{onClick:()=>s("/books"),className:"btn btn-secondary",children:"← Back to Books"})]}),w&&e.jsx("div",{className:"error",children:e.jsxs("p",{children:["❌ ",w]})}),e.jsxs("form",{onSubmit:v,className:"book-form",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"title",children:"Title *"}),e.jsx("input",{type:"text",id:"title",name:"title",value:o.title,onChange:f,required:!0,placeholder:"Enter book title"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"author",children:"Author *"}),e.jsxs("select",{id:"author",name:"author",value:o.author,onChange:f,required:!0,children:[e.jsx("option",{value:"",children:"Select an author"}),x.map(t=>e.jsx("option",{value:t._id,children:t.name},t._id))]}),e.jsxs("small",{children:["Don't see the author? ",e.jsx("a",{href:"/authors/new",target:"_blank",children:"Add a new author"})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"isbn",children:"ISBN *"}),e.jsx("input",{type:"text",id:"isbn",name:"isbn",value:o.isbn,onChange:f,required:!0,placeholder:"Enter ISBN (10 or 13 digits)"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"genre",children:"Genre *"}),e.jsxs("select",{id:"genre",name:"genre",value:o.genre,onChange:f,required:!0,children:[e.jsx("option",{value:"",children:"Select a genre"}),S.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"price",children:"Price (₹) *"}),e.jsx("input",{type:"number",id:"price",name:"price",value:o.price,onChange:f,required:!0,min:"0",step:"1",placeholder:"0"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"stock",children:"Stock Quantity *"}),e.jsx("input",{type:"number",id:"stock",name:"stock",value:o.stock,onChange:f,required:!0,min:"0",placeholder:"0"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"publishedDate",children:"Published Date"}),e.jsx("input",{type:"date",id:"publishedDate",name:"publishedDate",value:o.publishedDate,onChange:f})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"pages",children:"Number of Pages"}),e.jsx("input",{type:"number",id:"pages",name:"pages",value:o.pages,onChange:f,min:"1",placeholder:"0"})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"description",children:"Description"}),e.jsx("textarea",{id:"description",name:"description",value:o.description,onChange:f,rows:"4",placeholder:"Enter book description..."})]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>s("/books"),className:"btn btn-secondary",disabled:u,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:u,children:u?"⏳ Saving...":d?"💾 Update Book":"➕ Create Book"})]})]})]})},W=()=>{const s=M(),{id:a}=Y(),d=!!a,[o,r]=i.useState({name:"",email:"",nationality:"",birthDate:"",biography:"",website:"",awards:[]}),[x,m]=i.useState(!1),[C,p]=i.useState(null),[w,c]=i.useState(!1);i.useEffect(()=>{d&&u()},[a]);const u=async()=>{try{m(!0);const t=(await D.getById(a)).data,l=t.birthDate?new Date(t.birthDate).toISOString().split("T")[0]:"";r({name:t.name||"",email:t.email||"",nationality:t.nationality||"",birthDate:l,biography:t.biography||"",website:t.website||"",awards:t.awards||[]})}catch(v){console.error("Error fetching author:",v);const t=E(v);p(t.message)}finally{m(!1)}},g=v=>{const{name:t,value:l}=v.target;r(b=>({...b,[t]:l}))},S=()=>{r(v=>({...v,awards:[...v.awards,{name:"",year:""}]}))},y=v=>{r(t=>({...t,awards:t.awards.filter((l,b)=>b!==v)}))},A=(v,t,l)=>{r(b=>({...b,awards:b.awards.map((n,j)=>j===v?{...n,[t]:l}:n)}))},f=async v=>{v.preventDefault(),c(!0),p(null);try{const t={...o};t.awards=t.awards.filter(l=>l.name.trim()&&l.year),t.awards=t.awards.map(l=>({...l,year:parseInt(l.year)})),Object.keys(t).forEach(l=>{(t[l]===""||Array.isArray(t[l])&&t[l].length===0)&&delete t[l]}),d?(await D.update(a,t),alert("Author updated successfully!")):(await D.create(t),alert("Author created successfully!")),s("/authors")}catch(t){console.error("Error saving author:",t);const l=E(t);p(l.message)}finally{c(!1)}};return x?e.jsx("div",{className:"author-form-page",children:e.jsx("div",{className:"loading",children:e.jsx("h2",{children:"👨‍💼 Loading Author..."})})}):e.jsxs("div",{className:"author-form-page",children:[e.jsxs("div",{className:"page-header",children:[e.jsx("h1",{children:d?"✏️ Edit Author":"➕ Add New Author"}),e.jsx("button",{onClick:()=>s("/authors"),className:"btn btn-secondary",children:"← Back to Authors"})]}),C&&e.jsx("div",{className:"error",children:e.jsxs("p",{children:["❌ ",C]})}),e.jsxs("form",{onSubmit:f,className:"author-form",children:[e.jsxs("div",{className:"form-grid",children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Name *"}),e.jsx("input",{type:"text",id:"name",name:"name",value:o.name,onChange:g,required:!0,placeholder:"Enter author's full name"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:g,placeholder:"author@example.com"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"nationality",children:"Nationality"}),e.jsx("input",{type:"text",id:"nationality",name:"nationality",value:o.nationality,onChange:g,placeholder:"e.g., American, British, Canadian"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"birthDate",children:"Birth Date"}),e.jsx("input",{type:"date",id:"birthDate",name:"birthDate",value:o.birthDate,onChange:g})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"website",children:"Website"}),e.jsx("input",{type:"url",id:"website",name:"website",value:o.website,onChange:g,placeholder:"https://authorwebsite.com"})]})]}),e.jsxs("div",{className:"form-group full-width",children:[e.jsx("label",{htmlFor:"biography",children:"Biography"}),e.jsx("textarea",{id:"biography",name:"biography",value:o.biography,onChange:g,rows:"4",placeholder:"Enter author's biography..."})]}),e.jsxs("div",{className:"awards-section",children:[e.jsxs("div",{className:"awards-header",children:[e.jsx("h3",{children:"🏆 Awards"}),e.jsx("button",{type:"button",onClick:S,className:"btn btn-sm btn-secondary",children:"➕ Add Award"})]}),o.awards.map((v,t)=>e.jsx("div",{className:"award-item",children:e.jsxs("div",{className:"award-inputs",children:[e.jsx("input",{type:"text",placeholder:"Award name",value:v.name,onChange:l=>A(t,"name",l.target.value)}),e.jsx("input",{type:"number",placeholder:"Year",min:"1900",max:new Date().getFullYear(),value:v.year,onChange:l=>A(t,"year",l.target.value)}),e.jsx("button",{type:"button",onClick:()=>y(t),className:"btn btn-sm btn-danger",children:"🗑️"})]})},t))]}),e.jsxs("div",{className:"form-actions",children:[e.jsx("button",{type:"button",onClick:()=>s("/authors"),className:"btn btn-secondary",disabled:w,children:"Cancel"}),e.jsx("button",{type:"submit",className:"btn btn-primary",disabled:w,children:w?"⏳ Saving...":d?"💾 Update Author":"➕ Create Author"})]})]})]})},we=()=>{var g,S;const[s,a]=i.useState({email:"",password:""}),[d,o]=i.useState(""),[r,x]=i.useState(!1),{login:m}=V(),C=M(),w=((S=(g=$().state)==null?void 0:g.from)==null?void 0:S.pathname)||"/",c=y=>{const{name:A,value:f}=y.target;a(v=>({...v,[A]:f})),d&&o("")},u=async y=>{y.preventDefault(),x(!0),o("");const A=await m(s.email,s.password);A.success?C(w,{replace:!0}):o(A.error||"Login failed"),x(!1)};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("div",{className:"auth-icon",children:e.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z"})})}),e.jsx("h1",{children:"Welcome Back"}),e.jsx("p",{children:"Sign in to your Old Town Books account"})]}),e.jsxs("form",{onSubmit:u,className:"auth-form",children:[d&&e.jsxs("div",{className:"error-message",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),d]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:c,placeholder:"Enter your email",required:!0,disabled:r})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),e.jsx("input",{type:"password",id:"password",name:"password",value:s.password,onChange:c,placeholder:"Enter your password",required:!0,disabled:r})]})]}),e.jsx("button",{type:"submit",className:`btn btn-primary auth-submit ${r?"loading":""}`,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Signing In..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M11,7L9.6,8.4l2.6,2.6H2v2h10.2l-2.6,2.6L11,17l5-5L11,7z"})}),"Sign In"]})})]}),e.jsxs("div",{className:"auth-footer",children:[e.jsxs("p",{children:["Don't have an account? ",e.jsx(N,{to:"/register",className:"auth-link",children:"Create one here"})]}),e.jsx("div",{className:"demo-info",children:e.jsx("small",{children:"Demo: Use any email and password to login"})})]})]})})},ye=()=>{const[s,a]=i.useState({name:"",email:"",password:"",confirmPassword:""}),[d,o]=i.useState(""),[r,x]=i.useState(!1),{register:m}=V(),C=M(),p=c=>{const{name:u,value:g}=c.target;a(S=>({...S,[u]:g})),d&&o("")},w=async c=>{if(c.preventDefault(),x(!0),o(""),s.password!==s.confirmPassword){o("Passwords do not match"),x(!1);return}if(s.password.length<6){o("Password must be at least 6 characters long"),x(!1);return}const u=await m(s);u.success?C("/",{replace:!0}):o(u.error||"Registration failed"),x(!1)};return e.jsx("div",{className:"auth-container",children:e.jsxs("div",{className:"auth-card",children:[e.jsxs("div",{className:"auth-header",children:[e.jsx("div",{className:"auth-icon",children:e.jsx("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})})}),e.jsx("h1",{children:"Join Old Town Books"}),e.jsx("p",{children:"Create your account to manage the bookstore"})]}),e.jsxs("form",{onSubmit:w,className:"auth-form",children:[d&&e.jsxs("div",{className:"error-message",children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})}),d]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",children:"Full Name"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),e.jsx("input",{type:"text",id:"name",name:"name",value:s.name,onChange:p,placeholder:"Enter your full name",required:!0,disabled:r})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",children:"Email Address"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})}),e.jsx("input",{type:"email",id:"email",name:"email",value:s.email,onChange:p,placeholder:"Enter your email",required:!0,disabled:r})]})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),e.jsx("input",{type:"password",id:"password",name:"password",value:s.password,onChange:p,placeholder:"Create a password",required:!0,disabled:r,minLength:"6"})]}),e.jsx("small",{children:"Password must be at least 6 characters long"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"input-wrapper",children:[e.jsx("svg",{className:"input-icon",width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"})}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:s.confirmPassword,onChange:p,placeholder:"Confirm your password",required:!0,disabled:r})]})]}),e.jsx("button",{type:"submit",className:`btn btn-primary auth-submit ${r?"loading":""}`,disabled:r,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"spinner"}),"Creating Account..."]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:e.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"})}),"Create Account"]})})]}),e.jsxs("div",{className:"auth-footer",children:[e.jsxs("p",{children:["Already have an account? ",e.jsx(N,{to:"/login",className:"auth-link",children:"Sign in here"})]}),e.jsx("div",{className:"demo-info",children:e.jsx("small",{children:"Demo: Fill in any information to create an account"})})]})]})})};function ke(){return e.jsx(me,{children:e.jsx("div",{className:"App",children:e.jsxs(U,{children:[e.jsx(I,{path:"/login",element:e.jsx(we,{})}),e.jsx(I,{path:"/register",element:e.jsx(ye,{})}),e.jsx(I,{path:"/*",element:e.jsx(xe,{children:e.jsxs("div",{className:"app-layout",children:[e.jsx(pe,{}),e.jsx("main",{className:"main-content",children:e.jsxs(U,{children:[e.jsx(I,{path:"/",element:e.jsx(ve,{})}),e.jsx(I,{path:"/books",element:e.jsx(fe,{})}),e.jsx(I,{path:"/books/new",element:e.jsx(G,{})}),e.jsx(I,{path:"/books/edit/:id",element:e.jsx(G,{})}),e.jsx(I,{path:"/authors",element:e.jsx(be,{})}),e.jsx(I,{path:"/authors/new",element:e.jsx(W,{})}),e.jsx(I,{path:"/authors/edit/:id",element:e.jsx(W,{})}),e.jsx(I,{path:"/orders",element:e.jsx(Ne,{})}),e.jsx(I,{path:"*",element:e.jsxs("div",{className:"not-found",children:[e.jsx("h2",{children:"📚 Page Not Found"}),e.jsx("p",{children:"The page you're looking for doesn't exist."})]})})]})})]})})})]})})})}H.createRoot(document.getElementById("root")).render(e.jsx(ae.StrictMode,{children:e.jsx(ne,{children:e.jsx(ke,{})})}));
